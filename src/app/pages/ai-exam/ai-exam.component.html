<div class="ai-exam-container" style="margin-top: 100px;">
  <!-- AI Header -->
  <div class="ai-header">
    <div class="ai-avatar">
      <div class="ai-brain">
        <div class="brain-pulse" [class.thinking]="isThinking"></div>
        <i class='bx bx-bot'></i>
      </div>
    </div>
    <h1 class="ai-title">ุงููุณุงุนุฏ ุงูุฐูู ููุชุนูู</h1>
    <div class="progress-indicator" *ngIf="examState === 'question'">
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="progressPercentage"></div>
      </div>
      <span class="progress-text">ุงูุณุคุงู {{ currentQuestionIndex + 1 }} ูู {{ totalQuestions }}</span>
    </div>
  </div>

  <!-- Loading Phase -->
  <div *ngIf="examState === 'loading'" class="loading-phase">
    <div class="ai-card">
      <div class="ai-thinking">
        <div class="thinking-dots">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
        <h2>๐ง ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุญุถูุฑ ุงุฎุชุจุงุฑู...</h2>
        <p>ูุชู ุชุญููู ุงููุญุชูู ูุฅูุดุงุก ุฃุณุฆูุฉ ูุฎุตุตุฉ ูู</p>
        <div class="loading-bar">
          <div class="loading-progress"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Question Phase -->
  <div *ngIf="examState === 'question' && currentQuestion" class="question-phase">
    <div class="ai-card">
      <div class="ai-message-bubble">
        <div class="ai-avatar-small"><i class='bx bx-bot'></i></div>
        <div class="message-content">
          <div class="ai-badge">ูููุฏ ุงูุฃุณุฆูุฉ ุงูุฐูู</div>
          <h3 class="question-title">ุงูุณุคุงู {{ currentQuestionIndex + 1 }}</h3>
          <p class="question-text">{{ currentQuestion.description }}</p>
          <div class="question-mark">
            <span class="mark-badge">{{ currentQuestion.mark }} ููุทุฉ</span>
          </div>
        </div>
      </div>

      <div class="choices-area">
        <div class="choices-header">
          <span class="choices-icon">๐</span>
          <span class="choices-label">ุงุฎุชุฑ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ</span>
        </div>
        <div class="choices-list">
          <div 
            *ngFor="let choice of currentQuestion.choices"
            class="choice-item"
            [class.selected]="selectedChoiceId === choice.id"
            (click)="selectChoice(choice.id)">
            <div class="choice-radio">
              <div class="radio-dot" *ngIf="selectedChoiceId === choice.id"></div>
            </div>
            <div class="choice-text">{{ choice.text }}</div>
          </div>
        </div>
        <button
          (click)="submitAnswer()"
          [disabled]="!selectedChoiceId || isLoading"
          class="ai-submit-btn">
          <span *ngIf="!isLoading && hasMoreQuestions()">โก ุงูุชุงูู</span>
          <span *ngIf="!isLoading && !hasMoreQuestions()">๐ ุฅููุงุก ุงูุงูุชุญุงู</span>
          <span *ngIf="isLoading" class="loading-text">
            <span class="thinking-dots-inline">
              <span class="dot-inline"></span>
              <span class="dot-inline"></span>
              <span class="dot-inline"></span>
            </span>
            ุฌุงุฑู ุงูุฅุฑุณุงู...
          </span>
        </button>
      </div>
    </div>
  </div>

  <!-- Exam Failed Phase -->
  <div *ngIf="examState === 'exam-failed'" class="exam-failed-phase">
    <div class="ai-card">
      <div class="failure-header">
        <div class="failure-icon">๐</div>
        <h2>ูู ุชุฌุชุฒ ุงูุงูุชุญุงู ูุฐู ุงููุฑุฉ</h2>
        <p class="passing-message">ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ุฃู ูุฑุงุฌุนุฉ ุงููุญุชูู</p>
      </div>

      <div class="failure-feedback">
        <div class="ai-avatar-small"><i class='bx bx-bot'></i></div>
        <div class="feedback-content">
          <div class="ai-badge">ูุตูุญุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู</div>
          <p>ุฑุงุฌุน ุงููุญุชูู ุจุนูุงูุฉ ูุญุงูู ูุฑุฉ ุฃุฎุฑู. ุงูุชุนูู ุนูููุฉ ุชุณุชุบุฑู ููุชุงู.</p>
        </div>
      </div>

      <div class="failure-actions">
        <button (click)="restartExam()" class="retry-btn">
          ๐ ุฅุนุงุฏุฉ ุงููุญุงููุฉ
        </button>
        <button (click)="goToCurrentContent()" class="back-btn">
          โ ุงูุนูุฏุฉ ููุฏุฑุณ
        </button>
      </div>
    </div>
  </div>

  <!-- Error Toast -->
  <div *ngIf="errorMessage" class="error-toast">
    <span class="error-icon">โ๏ธ</span>
    <span class="error-text">{{ errorMessage }}</span>
    <button (click)="errorMessage = ''" class="error-dismiss">โ</button>
  </div>
</div>